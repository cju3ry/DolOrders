# C4 Model - Gestion des Clients DolOrders

## ğŸ“‹ Vue d'ensemble

Ce document prÃ©sente l'architecture de la fonctionnalitÃ© de gestion des clients dans l'application DolOrders en utilisant le modÃ¨le C4.

---

## ğŸŒ Niveau 1 : Diagramme de Contexte (System Context)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚                         Utilisateur Mobile                      â”‚
â”‚                    (EmployÃ© de l'entreprise)                    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ Consulte clients
                             â”‚ CrÃ©e commandes
                             â”‚ Synchronise donnÃ©es
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚                      Application DolOrders                      â”‚
â”‚                    (Application Android)                        â”‚
â”‚                                                                 â”‚
â”‚  â€¢ Gestion des clients (crÃ©ation, consultation)                â”‚
â”‚  â€¢ Prise de commandes                                          â”‚
â”‚  â€¢ Synchronisation avec Dolibarr                               â”‚
â”‚  â€¢ Mode hors ligne avec cache local                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ API REST
                             â”‚ (HTTPS)
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚                    Serveur Dolibarr ERP                         â”‚
â”‚                  (SystÃ¨me externe existant)                     â”‚
â”‚                                                                 â”‚
â”‚  â€¢ Base de donnÃ©es des clients (thirdparties)                  â”‚
â”‚  â€¢ Gestion des commandes                                       â”‚
â”‚  â€¢ API REST native                                             â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Relations :**
- **Utilisateur** â†’ **DolOrders** : Utilise l'application mobile pour gÃ©rer clients et commandes
- **DolOrders** â†’ **Dolibarr** : Synchronise les donnÃ©es via API REST avec authentification DOLAPIKEY

---

## ğŸ“¦ Niveau 2 : Diagramme de Conteneurs (Container Diagram)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Application DolOrders                            â”‚
â”‚                         (Android APK)                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   Interface UI       â”‚         â”‚   Stockage Local     â”‚            â”‚
â”‚  â”‚   (Activities &      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤   (Fichiers JSON)    â”‚            â”‚
â”‚  â”‚    Fragments)        â”‚  Lit/   â”‚                      â”‚            â”‚
â”‚  â”‚                      â”‚  Ã‰crit  â”‚  â€¢ clients_data.json â”‚            â”‚
â”‚  â”‚  â€¢ MainActivity      â”‚         â”‚  â€¢ RÃ©pertoire privÃ©  â”‚            â”‚
â”‚  â”‚  â€¢ ClientsFragment   â”‚         â”‚  â€¢ SupprimÃ© si       â”‚            â”‚
â”‚  â”‚  â€¢ LoginActivity     â”‚         â”‚    dÃ©sinstallation   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚             â”‚                                                          â”‚
â”‚             â”‚ Appelle                                                  â”‚
â”‚             â–¼                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚        Couche MÃ©tier (Business Logic)        â”‚                     â”‚
â”‚  â”‚                                               â”‚                     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                     â”‚
â”‚  â”‚  â”‚ ClientRepo-    â”‚    â”‚ ClientStorage-   â”‚ â”‚                     â”‚
â”‚  â”‚  â”‚ sitory         â”‚â—„â”€â”€â”€â”¤ Manager          â”‚ â”‚                     â”‚
â”‚  â”‚  â”‚                â”‚    â”‚                  â”‚ â”‚                     â”‚
â”‚  â”‚  â”‚ â€¢ RÃ©cup API    â”‚    â”‚ â€¢ Save/Load      â”‚ â”‚                     â”‚
â”‚  â”‚  â”‚ â€¢ Mapping DTO  â”‚    â”‚ â€¢ JSON           â”‚ â”‚                     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                     â”‚
â”‚  â”‚          â”‚                                    â”‚                     â”‚
â”‚  â”‚          â”‚ Utilise                            â”‚                     â”‚
â”‚  â”‚          â–¼                                    â”‚                     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                     â”‚
â”‚  â”‚  â”‚ ClientMapper   â”‚    â”‚ Client (Domain)  â”‚ â”‚                     â”‚
â”‚  â”‚  â”‚                â”‚â”€â”€â”€â–ºâ”‚                  â”‚ â”‚                     â”‚
â”‚  â”‚  â”‚ â€¢ DTO â†’ Model  â”‚    â”‚ â€¢ Builder        â”‚ â”‚                     â”‚
â”‚  â”‚  â”‚ â€¢ Validation   â”‚    â”‚ â€¢ Validations    â”‚ â”‚                     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚        Couche DonnÃ©es (Data Layer)           â”‚                     â”‚
â”‚  â”‚                                               â”‚                     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                     â”‚
â”‚  â”‚  â”‚ ClientApi-     â”‚    â”‚ ClientType-      â”‚ â”‚                     â”‚
â”‚  â”‚  â”‚ ReponseDto     â”‚    â”‚ Adapter (Gson)   â”‚ â”‚                     â”‚
â”‚  â”‚  â”‚                â”‚    â”‚                  â”‚ â”‚                     â”‚
â”‚  â”‚  â”‚ â€¢ SÃ©rialisationâ”‚    â”‚ â€¢ SÃ©rialiseur    â”‚ â”‚                     â”‚
â”‚  â”‚  â”‚ â€¢ @SerializedName   â”‚ â€¢ DÃ©sÃ©rialiseur  â”‚ â”‚                     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚        Couche RÃ©seau (Network Layer)         â”‚                     â”‚
â”‚  â”‚                                               â”‚                     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                     â”‚
â”‚  â”‚  â”‚ Volley         â”‚    â”‚ LoginActivity    â”‚ â”‚                     â”‚
â”‚  â”‚  â”‚ RequestQueue   â”‚    â”‚                  â”‚ â”‚                     â”‚
â”‚  â”‚  â”‚                â”‚    â”‚ â€¢ Authentificationâ”‚                       â”‚
â”‚  â”‚  â”‚ â€¢ HTTP Client  â”‚    â”‚ â€¢ SharedPrefs    â”‚ â”‚                     â”‚
â”‚  â”‚  â”‚ â€¢ Async        â”‚    â”‚ â€¢ Credentials    â”‚ â”‚                     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ HTTPS / JSON
                             â”‚ Header: DOLAPIKEY
                             â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   API Dolibarr       â”‚
                  â”‚                      â”‚
                  â”‚ GET /thirdparties    â”‚
                  â”‚ POST /orders         â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Niveau 3 : Diagramme de Composants (Component Diagram)

### Module : Gestion des Clients

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Module Gestion Clients                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    UI Components                                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚  â”‚
â”‚  â”‚  â”‚ MainActivity â”‚         â”‚ Clients-     â”‚                       â”‚  â”‚
â”‚  â”‚  â”‚              â”‚         â”‚ Fragment     â”‚                       â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Bouton     â”‚         â”‚              â”‚                       â”‚  â”‚
â”‚  â”‚  â”‚   Synchro    â”‚         â”‚ â€¢ Formulaire â”‚                       â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Navigation â”‚         â”‚ â€¢ RecyclerV. â”‚                       â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚  â”‚
â”‚  â”‚         â”‚                        â”‚                                â”‚  â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚  â”‚
â”‚  â”‚                      â”‚ Appelle                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Repository Pattern                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ ClientRepository                                            â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ + recupererClientsDolibarr(callback)                       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€ RÃ©cupÃ¨re URL & API Key (LoginActivity)                â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€ Construit requÃªte HTTP (Volley)                       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€ Parse JSON â†’ DTO (Gson)                               â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€ Map DTO â†’ Domain (ClientMapper)                       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â””â”€ Callback Success/Error                                â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ interface ClientCallback {                                 â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   + onSuccess(List<Client>)                                â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   + onError(String message)                                â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ }                                                           â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚                 â”‚                          â”‚                    â”‚   â”‚
â”‚  â”‚        Utilise  â”‚                          â”‚ Utilise            â”‚   â”‚
â”‚  â”‚                 â–¼                          â–¼                    â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ ClientMapper         â”‚    â”‚ ClientStorageManager         â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                      â”‚    â”‚                              â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ + getClient(dto)     â”‚    â”‚ + saveClients(List<Client>) â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â†’ Client           â”‚    â”‚   â†’ boolean                  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                      â”‚    â”‚ + loadClients()              â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ Transforme :         â”‚    â”‚   â†’ List<Client>             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ name â†’ nom         â”‚    â”‚ + addClient(Client)          â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ address â†’ adresse  â”‚    â”‚ + clearClients()             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ zip â†’ codePostal   â”‚    â”‚ + hasStoredClients()         â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ town â†’ ville       â”‚    â”‚ + getClientCount()           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ email â†’ mail       â”‚    â”‚                              â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ phone â†’ telephone  â”‚    â”‚ Utilise :                    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                      â”‚    â”‚ â€¢ Gson + ClientTypeAdapter   â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ Valeurs par dÃ©faut : â”‚    â”‚ â€¢ FileOutputStream           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ utilisateur="Sys"  â”‚    â”‚ â€¢ clients_data.json          â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ adresse="Inconnu"  â”‚    â”‚                              â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ cp="00000"         â”‚    â”‚                              â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Domain Model (ModÃ¨le MÃ©tier)                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ Client                                                      â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ - id: String                                                â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ - nom: String                                               â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ - adresse: String                                           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ - codePostal: String                                        â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ - ville: String                                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ - adresseMail: String                                       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ - telephone: String                                         â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ - utilisateur: String                                       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ - dateSaisie: Date                                          â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ - utilisateurEnvoie: String                                 â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ - dateEnvoie: Date                                          â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ - dateMiseAJour: Date                                       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ + Builder Pattern avec validations :                       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ nom non vide                                            â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ adresse non vide                                        â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ codePostal = 5 chiffres                                 â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ ville non vide                                          â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ email valide (regex)                                    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ telephone = 10 chiffres                                 â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ utilisateur non vide                                    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ dateSaisie non null                                     â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Data Transfer Objects (DTOs)                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ ClientApiReponseDto                                         â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ @SerializedName("id")                                       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ + id: String                                                â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ @SerializedName("name")                                     â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ + nom: String                                               â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ @SerializedName("address")                                  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ + adresse: String                                           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ @SerializedName("zip")                                      â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ + codePostal: String                                        â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ @SerializedName("town")                                     â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ + ville: String                                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ @SerializedName("email")                                    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ + mail: String                                              â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ @SerializedName("phone")                                    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ + numTel: String                                            â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ @SerializedName("date_creation")                            â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ + dateSaisie: long (timestamp)                              â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Serialization Components                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ ClientTypeAdapter (extends TypeAdapter<Client>)            â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ + write(JsonWriter, Client)                                â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â†’ SÃ©rialise Client vers JSON                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ + read(JsonReader)                                          â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â†’ DÃ©sÃ©rialise JSON vers Client                           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â†’ Utilise le Builder                                      â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â†’ Convertit timestamps (ms) â†’ Date                        â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Authentication & Storage                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ LoginActivity                                               â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ + getApiKeyFromContext(Context)                            â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â†’ String (rÃ©cupÃ©rÃ© des EncryptedSharedPreferences)       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ + getBaseUrlFromContext(Context)                           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   â†’ String (rÃ©cupÃ©rÃ© des SharedPreferences normales)       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ Storage :                                                   â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ API Key : EncryptedSharedPreferences (cryptÃ©e)           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Base URL : SharedPreferences (clair, reproposÃ©e)         â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Niveau 4 : Diagramme de Code (SÃ©quence dÃ©taillÃ©e)

### ScÃ©nario : Synchronisation des clients depuis Dolibarr

```
Utilisateur    MainActivity    ClientRepository    ClientMapper    ClientStorage    Volley    Dolibarr API
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚  Clique sur   â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚  "Synchro"    â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚ chargerLesClients()â”‚               â”‚               â”‚           â”‚            â”‚
    â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚ getBaseUrlFromContext()        â”‚           â”‚            â”‚
    â”‚               â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º           â”‚            â”‚
    â”‚               â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚            â”‚
    â”‚               â”‚                   â”‚ "https://dolorders.com/htdocs"             â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚ getApiKeyFromContext()         â”‚           â”‚            â”‚
    â”‚               â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º           â”‚            â”‚
    â”‚               â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚            â”‚
    â”‚               â”‚                   â”‚ "024dc07a0fcc..."              â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚ StringRequest(GET /thirdparties)           â”‚            â”‚
    â”‚               â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚ GET /api/../thirdparties
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚ Header: DOLAPIKEY
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚ 200 OK + JSON
    â”‚               â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚               â”‚                   â”‚ response (JSON String)         â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚ Gson.fromJson()â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚ List<ClientApiReponseDto>      â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚ Pour chaque DTO :              â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚ getClient(dto) â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚ Transformations + Validations          â”‚
    â”‚               â”‚                   â”‚                â”‚ â€¢ name â†’ nom  â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚ â€¢ address â†’ adresse (dÃ©faut si null)   â”‚
    â”‚               â”‚                   â”‚                â”‚ â€¢ Builder.build() avec validations     â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚ Client (domain)â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚ ClientCallback    â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚ onSuccess(clients)â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚ saveClients(clients)               â”‚               â”‚           â”‚            â”‚
    â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º           â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚ Gson.toJson(clients)   â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚ (avec ClientTypeAdapter)
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚ Ã‰crire dans            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚ clients_data.json      â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚ (FileOutputStream)     â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚            â”‚
    â”‚               â”‚ boolean: true     â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚  Toast        â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚  "X clients   â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚  sauvegardÃ©s" â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚                â”‚               â”‚           â”‚            â”‚
    â”‚               â”‚                   â”‚                â”‚               â”‚           â”‚            â”‚
```

---

## ğŸ“Š Flux de donnÃ©es

### 1. Synchronisation (API â†’ App)

```
Dolibarr API
    â”‚
    â”‚ JSON : { "id": "1", "name": "Client1", "address": "...", ... }
    â–¼
ClientApiReponseDto
    â”‚
    â”‚ ClientMapper.getClient(dto)
    â”‚ â€¢ Transformation des noms de champs
    â”‚ â€¢ Ajout valeurs par dÃ©faut
    â”‚ â€¢ Validation
    â–¼
Client (Domain Model)
    â”‚
    â”‚ ClientStorageManager.saveClients()
    â–¼
Fichier JSON Local (clients_data.json)
    â”‚
    â”‚ ClientTypeAdapter (sÃ©rialisation)
    â–¼
{
  "id": "1",
  "nom": "Client1",
  "adresse": "...",
  "codePostal": "12345",
  "ville": "Paris",
  "adresseMail": "client@email.com",
  "telephone": "0612345678",
  "utilisateur": "SystÃ¨me",
  "dateSaisie": 1703456789000,
  ...
}
```

### 2. Chargement local (App â†’ UI)

```
Fichier JSON Local (clients_data.json)
    â”‚
    â”‚ ClientStorageManager.loadClients()
    â”‚ â€¢ Lecture fichier
    â”‚ â€¢ ClientTypeAdapter (dÃ©sÃ©rialisation)
    â–¼
List<Client>
    â”‚
    â”‚ Adapter RecyclerView
    â–¼
UI (Affichage dans ClientsFragment)
```

---

## ğŸ” SÃ©curitÃ©

### Stockage des donnÃ©es sensibles

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     LoginActivity                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  EncryptedSharedPreferences (AES256-GCM)                   â”‚
â”‚  Fichier : "secure_prefs_crypto"                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â€¢ username (cryptÃ©)                                   â”‚ â”‚
â”‚  â”‚ â€¢ api_key (cryptÃ©)                                    â”‚ â”‚
â”‚  â”‚ â€¢ is_logged_in (cryptÃ©)                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  SharedPreferences normales                                â”‚
â”‚  Fichier : "app_prefs"                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â€¢ base_url (clair - reproposÃ©e Ã  l'utilisateur)       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Patterns utilisÃ©s

### 1. **Repository Pattern**
- `ClientRepository` : Abstraction de la source de donnÃ©es (API)
- Permet de changer facilement la source sans impacter l'UI

### 2. **Builder Pattern**
- `Client.Builder` : Construction d'objets complexes avec validation
- Garantit la validitÃ© des objets crÃ©Ã©s

### 3. **DTO (Data Transfer Object)**
- `ClientApiReponseDto` : SÃ©paration entre format API et modÃ¨le mÃ©tier
- Facilite l'Ã©volution indÃ©pendante de l'API et du domaine

### 4. **Mapper Pattern**
- `ClientMapper` : Transformation DTO â†” Domain Model
- Centralise la logique de transformation

### 5. **Adapter Pattern (Gson)**
- `ClientTypeAdapter` : SÃ©rialisation/dÃ©sÃ©rialisation personnalisÃ©e
- NÃ©cessaire car `Client` utilise un Builder

### 6. **Singleton Pattern (implicite)**
- `ClientStorageManager` : Une instance par contexte
- `RequestQueue` (Volley) : PartagÃ©e dans l'application

### 7. **Callback Pattern**
- `ClientRepository.ClientCallback` : Gestion asynchrone des rÃ©sultats
- DÃ©couple l'appelant de l'exÃ©cution

---

## ğŸ“ˆ Ã‰volutions possibles

### Court terme
1. âœ… Ajouter un RecyclerView pour afficher les clients
2. âœ… ImplÃ©menter Pull-to-Refresh
3. âš ï¸ GÃ©rer les doublons lors de la synchronisation

### Moyen terme
4. ğŸ”„ Ajouter un timestamp de derniÃ¨re synchro
5. ğŸ”„ Synchronisation incrÃ©mentale (delta)
6. ğŸ”„ Gestion des conflits (modification locale vs distante)

### Long terme
7. ğŸ’¡ Migration vers Room Database (SQLite)
8. ğŸ’¡ Synchronisation bidirectionnelle (upload modifications locales)
9. ğŸ’¡ Cache intelligent avec TTL (Time To Live)

---

## ğŸ“ Notes techniques

### Choix architecturaux

| Aspect | Choix | Justification |
|--------|-------|---------------|
| **Stockage local** | Fichier JSON | Simple, lÃ©ger, suffisant pour volume modÃ©rÃ© |
| **HTTP Client** | Volley | DÃ©jÃ  utilisÃ© dans le projet, adaptÃ© aux petites requÃªtes |
| **SÃ©rialisation** | Gson | Standard Android, flexible, TypeAdapter personnalisÃ© |
| **Authentification** | DOLAPIKEY (Header) | Standard Dolibarr, simple Ã  implÃ©menter |
| **Stockage sÃ©curisÃ©** | EncryptedSharedPreferences | Natif Android, cryptage AES-256 |
| **URL en clair** | SharedPreferences normales | Non sensible, reproposÃ©e Ã  l'utilisateur |

### Limites actuelles

- âŒ Pas de pagination (limite de 100 clients)
- âŒ Pas de cache avec expiration
- âŒ Pas de gestion des modifications concurrentes
- âŒ Ã‰criture synchrone du fichier (peut bloquer si liste Ã©norme)

---

## ğŸ§ª Tests recommandÃ©s

### Tests unitaires
- âœ… `ClientMapper` : Transformation DTO â†’ Model
- âœ… `Client.Builder` : Validations
- âœ… `ClientTypeAdapter` : SÃ©rialisation/dÃ©sÃ©rialisation

### Tests d'intÃ©gration
- âœ… `ClientRepository` : Mock de Volley
- âœ… `ClientStorageManager` : Lecture/Ã©criture fichier

### Tests UI
- âœ… `MainActivity` : Bouton synchronisation
- âœ… `ClientsFragment` : Affichage liste

---

## ğŸ“š RÃ©fÃ©rences

- **C4 Model** : https://c4model.com/
- **Repository Pattern** : Martin Fowler
- **Android Architecture** : https://developer.android.com/topic/architecture
- **Volley** : https://google.github.io/volley/
- **Gson** : https://github.com/google/gson


